<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Ym2067</title>
  <meta name="author" content="Ym2067">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="Ym2067"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Ym2067" type="application/atom+xml">
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" type="text/css">
<link rel="stylesheet" href="/css/style.css" type="text/css">
  <script src="http://code.jquery.com/jquery-2.1.1.min.js"></script>
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-368771XX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>

<body>
  <header id="header" class='normal_mode'>
    <nav id="main-nav">
  <ul class='container'>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
  </header>
  <div id="content" class="container">
    <div id="cover">
	<div id="profile" alt="fancybox/356317.jpg">
		<a href="/">
			<div class="logo">
				<img src="/logo.png" alt="Profile Picture">
			</div>
			<div id="title">Ym2067</div>
		</a>

		
		 <ul class="my-socials">
  
  <li>
  	<a href="https://github.com/ym2067" class="github" target="_blank">
  		<i class="fa fa-github"></i>
  	</a>
  </li>
  
 
</ul>
	</div>
</div>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-11-25T07:04:53.000Z"><a href="/2015/11/25/20151125/">週三, 11月 25 2015, 3:04:53 下午</a></time>

  
    <h1 class="title"><a href="/2015/11/25/20151125/">jQuery操作DOM方法总结下:替换与移除</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/JS/">JS</a>, <a href="/tags/jQuery/">jQuery</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <h2 id="四、替换内容">四、替换内容</h2><h3 id="1-$(selector)-html(content)与$(selector)-text(content)的区别：">1.$(selector).html(content)与$(selector).text(content)的区别：</h3><p>通过.html()设置内容时，使用预留字符会被解析成DOM结构。如果不希望这样解析，需要使用字符实体（character entities）</p>
<pre><code>例如符号&lt;需要替换成&amp;lt<span class="comment">;</span>
</code></pre><p>而通过.text()设置内容时，所有html实体会被转换成相应字符。输入&lt;时会自动变成等价的字符实体。</p>
<pre><code>HTML 中有用的字符实体
注释：实体名称对大小写敏感！
显示结果    描述        实体名称    实体编号
             空格        &amp;nbsp;        &amp;<span class="comment">#160;</span>
    &lt;        小于号        &amp;lt;        &amp;<span class="comment">#60;</span>
    &gt;        大于号        &amp;gt;        &amp;<span class="comment">#62;</span>
    &amp;        和号        &amp;amp;        &amp;<span class="comment">#38;</span>
    "        引号        &amp;quot;        &amp;<span class="comment">#34;</span>
    '        撇号         &amp;apos; (IE不支持)    &amp;<span class="comment">#39;</span>
    ￠        分            &amp;cent;        &amp;<span class="comment">#162;</span>
    £        镑            &amp;pound;        &amp;<span class="comment">#163;</span>
    ¥        日圆        &amp;yen;        &amp;<span class="comment">#165;</span>
    €        欧元        &amp;euro;        &amp;<span class="comment">#8364;</span>
    §        小节        &amp;sect;        &amp;<span class="comment">#167;</span>
    ©        版权        &amp;<span class="built_ins">copy</span>;        &amp;<span class="comment">#169;</span>
    ®        注册商标    &amp;reg;        &amp;<span class="comment">#174;</span>
    ™        商标        &amp;trade;        &amp;<span class="comment">#8482;</span>
    ×        乘号        &amp;times;        &amp;<span class="comment">#215;</span>
    ÷        除号        &amp;divide;    &amp;<span class="comment">#247;</span>
</code></pre><h3 id="2-$(content)-replaceAll(selector)与$(selector)-replaceWith(content)/$(selector)-replaceWith(function())">2.$(content).replaceAll(selector)与$(selector).replaceWith(content)/$(selector).replaceWith(function())</h3><p>与添加内容相似，.repalceWith()是.replaceAll()的反向操作。</p>
<h2 id="五、移除内容">五、移除内容</h2><h3 id="1-移除元素">1.移除元素</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).empty()</span><br></pre></td></tr></table></figure>
<p>从selector中移除所有子内容，包括所有文本和子节点；但保留selector本身，以及保留所有的事件、jQuery数据。</p>
<h3 id="2-从文档中移除，但在jQuery中保留">2.从文档中移除，但在jQuery中保留</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).detach()</span><br></pre></td></tr></table></figure>
<p>在文档中移除selector，在jQuery对象中保留所有的事件、jQuery数据。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).remove()</span><br></pre></td></tr></table></figure>
<p>在文档中移除selector，在jQuery对象中只保留被选元素本身，移除所有事件、jQuery数据。</p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/11/25/20151125/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/11/25/20151125/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/11/25/20151125/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-11-24T09:58:27.000Z"><a href="/2015/11/24/20151124/">週二, 11月 24 2015, 5:58:27 下午</a></time>

  
    <h1 class="title"><a href="/2015/11/24/20151124/">jQuery操作DOM方法总结上:插入、移动与包裹</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/JS/">JS</a>, <a href="/tags/jQuery/">jQuery</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>开发中需要操作DOM的时候很多，如何选择合适的方法是个问题。我把常用的方法和场景做了个简单的总结:</p>
<p>假设要添加的元素为content，现有元素为selector</p>
<h2 id="一、添加内容">一、添加内容</h2><p>添加内容的方法可以分成4对，它们是.prependTo()与.prepend()，.appendTo()与.append()，.insertBefore()与.before()，.insertAfter()与.after()。</p>
<p>每一对间2个方法的区别是：例如$(content).prependTo(selector)和$(selector).prepend(content)，它们的区别是:</p>
<pre><code><span class="attribute">content</span>与selector的位置不同，
.<span class="function"><span class="title">prepend</span><span class="params">()</span></span>可以接受<span class="function"><span class="title">function</span><span class="params">()</span></span>做参数
</code></pre><p>这个例子中，我把后者称为前者的<code>“反向操作”</code>，下同</p>
<h3 id="1-在现有元素内部之前添加内容">1.在现有元素内部之前添加内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(content).prependTo(selector)</span><br></pre></td></tr></table></figure>
<p>反向操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).prepend(content)</span><br></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(selector).prepend(<span class="keyword">function</span>(index,html))</span><br><span class="line">--index接收选择器的 index 位置。</span><br><span class="line">--html接收选择器的当前 HTML。</span><br></pre></td></tr></table></figure></p>
<h3 id="2-在现有元素内部之后添加内容">2.在现有元素内部之后添加内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(content).appendTo(selector)</span><br></pre></td></tr></table></figure>
<p>反向操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).append(content)</span><br></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(selector).append(<span class="keyword">function</span>(index,html))</span><br><span class="line">--index接收选择器的 index 位置。</span><br><span class="line">--html接收选择器的当前 HTML。</span><br></pre></td></tr></table></figure></p>
<h3 id="3-在现有元素外部之前添加内容">3.在现有元素外部之前添加内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(content).insertBefore(selector)</span><br></pre></td></tr></table></figure>
<p>反向操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).before(content)</span><br></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(selector).before(<span class="keyword">function</span>(index))</span><br><span class="line">--index接收选择器的 index 位置。</span><br></pre></td></tr></table></figure></p>
<h3 id="4-在现有元素外部之后添加内容">4.在现有元素外部之后添加内容</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(content).insertAfter(selector)</span><br></pre></td></tr></table></figure>
<p>反向操作<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector).after(content)</span><br></pre></td></tr></table></figure></p>
<p>或者<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(selector).after(<span class="keyword">function</span>(index))</span><br><span class="line">--index接收选择器的 index 位置。</span><br></pre></td></tr></table></figure></p>
<h2 id="二、移动内容">二、移动内容</h2><p>把上面添加内容操作中的content替换成selector即可移动文档中的DOM节点。</p>
<p>例如<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(selector1).prependTo(selector2)</span><br></pre></td></tr></table></figure></p>
<p>即会把DOM中selector1中的节点移动到selector2的内部之前</p>
<h2 id="三、包裹内容">三、包裹内容</h2><p>$(selector).wrap(wrapper) 和 $(selector).wrapInner(wrapper) 与 $(selector).wrapAll(wrapper)的区别是:</p>
<pre><code><span class="function"><span class="title">wrap</span><span class="params">()</span></span>会把迭代出的每个元素分别包装在wrapper里。

<span class="function"><span class="title">warpInner</span><span class="params">()</span></span>把每个元素的子内容包装到wrapper里。

<span class="function"><span class="title">wrapAll</span><span class="params">()</span></span>把所有元素最外面包装到wrapper里。
</code></pre><p>例如:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'span.footnote'</span>)</span><br><span class="line">.insertBefore(<span class="string">'#footer'</span>)</span><br><span class="line">.wrapAll(<span class="string">'&lt;ol id="notes"&gt;&lt;/ol&gt;'</span>)</span><br><span class="line">.wrap(<span class="string">'&lt;li&gt;&lt;/li&gt;'</span>);</span><br></pre></td></tr></table></figure>
<pre><code>需要注意的是，由于这里的$(<span class="string">'span.footnote'</span>)是分布在文档各处的，如果去掉了.<span class="function"><span class="title">insertBefore</span><span class="params">(<span class="string">'#footer'</span>)</span></span>直接.<span class="function"><span class="title">wrapAll</span><span class="params">(<span class="string">'&lt;ol id="notes"&gt;&lt;/ol&gt;'</span>)</span></span>的话，会自动将所有$(<span class="string">'span.footnote'</span>)移动到第一个$(<span class="string">'span.footnote'</span>)处并包裹起来。
</code></pre>
      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/11/24/20151124/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/11/24/20151124/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/11/24/20151124/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-11-10T03:47:16.000Z"><a href="/2015/11/10/20151110/">週二, 11月 10 2015, 11:47:16 中午</a></time>

  
    <h1 class="title"><a href="/2015/11/10/20151110/">防止重复提交ajax请求</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/JS/">JS</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>最近项目中涉及防止重复提交的功能，研究后发现两种简单实用的方法，可以应对大多数简单防重复提交的情景：</p>
<p>A. 独占型提交</p>
<p>只允许同时存在一次提交操作，并且直到本次提交完成才能进行下一次提交。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.submit = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  <span class="keyword">if</span> (this.promise_.state() === <span class="string">'pending'</span>) &#123;</span><br><span class="line">    <span class="built_in">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">return</span> this.promise_ = $.post(<span class="string">'/api/save'</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>B. 贪婪型提交</p>
<p>无限制的提交，但是以最后一次操作为准；亦即需要尽快给出最后一次操作的反馈，而前面的操作结果并不重要。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module.submit = <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">  <span class="keyword">if</span> (this.promise_.state() === <span class="string">'pending'</span>) &#123;</span><br><span class="line">    this.promise_.abort()</span><br><span class="line">  &#125;</span><br><span class="line">  // todo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于页面上有多个按钮，它们请求同一个url，根据以上原理写了个防止重复提交的序列：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> sendEnableAndDisable(id,data)&#123;</span><br><span class="line">		<span class="keyword">if</span> (typeof(this.promise_) == <span class="string">"undefined"</span>)&#123;</span><br><span class="line">			this.promise_ = [];</span><br><span class="line">		&#125;</span><br><span class="line">	    </span><br><span class="line">	    var url = <span class="string">"/as-school/ajax/abilityCurrencyTask/updateStatus"</span>;</span><br><span class="line">	    //以取消上次提交的方式，防止重复提交</span><br><span class="line">	    <span class="keyword">if</span> (this.promise_[id] != null &amp;&amp; this.promise_[id].state() === <span class="string">'pending'</span>) &#123;</span><br><span class="line">	    	this.promise_[id].abort();</span><br><span class="line">	    &#125;</span><br><span class="line">	    <span class="built_in">return</span> this.promise_[id] =$.post(url, data, <span class="keyword">function</span>(data)&#123;</span><br><span class="line">	    	var data =  $.parseJSON(data);</span><br><span class="line">	    	<span class="keyword">if</span>(data.success == <span class="literal">true</span>) &#123;</span><br><span class="line">	    	&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">	    	&#125;</span><br><span class="line">	    &#125;);</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<p>如果用户采取暴力破解，直接访问ajaxurl，至少有3种防范方法</p>
<ul>
<li>限制请求频率</li>
<li>自动探测重复内容</li>
<li>为提交内容关联一个唯一的 client id</li>
</ul>
<p>参考文档：<br><a href="http://www.zhihu.com/question/19805411" target="_blank" rel="external">http://www.zhihu.com/question/19805411</a></p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/11/10/20151110/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/11/10/20151110/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/11/10/20151110/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-08-26T02:26:51.000Z"><a href="/2015/08/26/20150826/">週三, 8月 26 2015, 10:26:51 上午</a></time>

  
    <h1 class="title"><a href="/2015/08/26/20150826/">解决ie7下position:fixed时li元素hover残影问题</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/HTML/">HTML</a>, <a href="/tags/IE/">IE</a>, <a href="/tags/浏览器兼容/">浏览器兼容</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>今天遇到了个奇怪的问题，页面左侧有个导航列表，页面滚动后设置它position:fixed相对屏幕定位，在ie7里当导航position:fixed时，里面的列表项li在鼠标滑过时会出现奇怪的残影，显示效果一团糟。ie8及其他浏览器显示正常。</p>
<p>研究下发下li里包含的a的display: inline-block;与li平级的div的display: block; li自己的是用户代理的默认样式display: list-item;</p>
<p><s>于是把li的样式设为display: block;问题解决</s></p>
<p><img src="/images/ie7根据相对浏览器窗口定位的li问题.png" alt="DOM结构"></p>
<p>总结了一下，IE7刚开始支持position:fixed，使用position:fixed属性时要注意看下IE7的效果。</p>
<p><mark>更新：之前的方法并没有解决问题，后来发现a的设置的宽度与外面等宽，缩小了a的宽度问题得以解决。</mark></p>
<p><img src="/images/ie7浮动li解决办法.png" alt="解决办法"></p>
<h4>补充IE6、7下css hack的2方法</h4>

<h4>1、IE6单独识别（margin-left对于只有IE6错位情况下）<br>{margin-left:5px;_margin-left:2px;}<br>这个时候除IE6外其它浏览器设别margin-left:5px，IE6单独识别_margin-left:2px</h4>

<h4>2、IE7与IE6都识别（margin-left对于ie6和ie7识别其它版本和品牌浏览器不识别）<br>{margin-left:5px;<em>margin-left:2px;}<br>这个时候除IE6和IE7外，其它浏览器设别margin-left:5px，IE6和IE7识别</em>margin-left:2px</h4>
      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/08/26/20150826/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/08/26/20150826/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/08/26/20150826/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-08-17T02:11:00.000Z"><a href="/2015/08/17/20150817/">週一, 8月 17 2015, 10:11:00 上午</a></time>

  
    <h1 class="title"><a href="/2015/08/17/20150817/">解决ie6-8点击label里图片bug的几种方法</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/HTML/">HTML</a>, <a href="/tags/IE/">IE</a>, <a href="/tags/浏览器兼容/">浏览器兼容</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>在网页中使用input:radio元素和input:checkbox元素时，往往需要用label将说明用的文字、图片包起来，使得点击说明图文时也可以勾选input：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> id=<span class="string">"sex"</span>&gt;&lt;label <span class="keyword">for</span>=<span class="string">"sex"</span>&gt;男&lt;img src=<span class="string">"male.jpg"</span> /&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>
<p>但是在ie6-8中会存在一个bug：点击label中的图片不会勾选input。</p>
<h2 id="解决方法如下：">解决方法如下：</h2><p>方法1，模拟点击：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"label img"</span>).live(<span class="string">"click"</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    $(<span class="string">"#"</span> + $(this).parents(<span class="string">"label"</span>).attr(<span class="string">"for"</span>)).click();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="此外还找到了以下方法（未验证），有需要的情况可以试一下：">此外还找到了以下方法（未验证），有需要的情况可以试一下：</h2><p>方法2，设置img的disabled属性：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=<span class="string">""</span> disabled=<span class="string">""</span> /&gt;</span><br></pre></td></tr></table></figure>
<p>方法3，使用span覆盖img：</p>
<p>html结构：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">    &lt;colgroup&gt;         </span><br><span class="line">        &lt;col width=<span class="string">"20%"</span>&gt;</span><br><span class="line">        &lt;col width=<span class="string">"60%"</span>&gt;                                    </span><br><span class="line">    &lt;/colgroup&gt;</span><br><span class="line">    &lt;tbody&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td class=<span class="string">"pay_bg"</span>&gt;通过支付宝平台进行转账&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"pay"</span> id=<span class="string">"zfb"</span>&gt;&lt;labelfor=<span class="string">"zfb"</span>&gt;&lt;span&gt;&lt;/span&gt;&lt;img src=<span class="string">"images/zfb.jpg"</span> alt=<span class="string">"支付宝"</span> height=<span class="string">"52"</span>width=<span class="string">"146"</span>&gt;&lt;/label&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td class=<span class="string">"pay_bg"</span>&gt;通过财付通平台进行转账&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"pay"</span> id=<span class="string">"cft"</span>&gt;&lt;labelfor=<span class="string">"cft"</span>&gt;&lt;span&gt;&lt;/span&gt;&lt;img src=<span class="string">"images/cft.jpg"</span> alt=<span class="string">"财付通"</span> height=<span class="string">"52"</span>width=<span class="string">"146"</span>&gt;&lt;/label&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;td class=<span class="string">"pay_bg"</span>&gt;同方自有支付平台，更便捷更贴心&lt;/td&gt;</span><br><span class="line">            &lt;td&gt;&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"pay"</span> id=<span class="string">"zzf"</span>&gt;&lt;labelfor=<span class="string">"zzf"</span>&gt;&lt;span&gt;&lt;/span&gt;&lt;img src=<span class="string">"images/zzf.jpg"</span> alt=<span class="string">"最支付"</span> height=<span class="string">"52"</span>width=<span class="string">"146"</span>&gt;&lt;/label&gt;&lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/tbody&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>
<p>css样式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">table label&#123;position:relative;oveflow:hidden&#125;</span><br><span class="line">table label span&#123;position:absolute;top:<span class="number">0</span>;left:<span class="number">0</span>;width:<span class="number">146</span>px;height:<span class="number">52</span>px;background:url(about:blank)no-repeat -<span class="number">5000</span>px&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>至此这个bug就解决了，不过在实际开发中，有时候会遇到这种情况：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;label <span class="keyword">for</span>=<span class="string">"hobby"</span>&gt;&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> id=<span class="string">"hobby"</span>&gt;跑步&lt;img src=<span class="string">"running.jpg"</span> /&gt;&lt;/label&gt;</span><br></pre></td></tr></table></figure>
<p>因为布局等原因，input:checkbox被放在了label里面，这时候使用的代码如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ie6-<span class="number">8</span>点击label里图片bug</span><br><span class="line">    	$(<span class="string">"label img"</span>).live(<span class="string">"click"</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    		$(<span class="string">"#"</span> + $(this).parents(<span class="string">"label"</span>).attr(<span class="string">"for"</span>)).click();//不冒泡</span><br><span class="line">    		<span class="keyword">if</span> (e.preventDefault) &#123;</span><br><span class="line">    			e.preventDefault();</span><br><span class="line">    		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    			e.returnValue = <span class="literal">false</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;);</span><br></pre></td></tr></table></figure>
<p>添加了preventDefault（ie下returnValue = false;）方法的调用，防止没有此bug的浏览器点击图片时checkbox被点击2次。</p>
<p>如果需要模拟点击的事件冒泡，可以使用以下代码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//ie6-<span class="number">8</span>点击label里图片bug</span><br><span class="line">    	$(<span class="string">"label img"</span>).live(<span class="string">"click"</span>, <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    		document.getElementById($(this).parents(<span class="string">"label"</span>).attr(<span class="string">"for"</span>)).click();//冒泡</span><br><span class="line">    		<span class="keyword">if</span> (e.preventDefault) &#123;</span><br><span class="line">    			e.preventDefault();</span><br><span class="line">    		&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    			e.returnValue = <span class="literal">false</span>;</span><br><span class="line">    		&#125;</span><br><span class="line">    	&#125;);</span><br></pre></td></tr></table></figure>
<p>也可以使用浏览器检测代替preventDefault，不过浏览器检测还是很有争议的，Jquery1.9已经废弃了$.browser，不推荐使用。</p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/08/17/20150817/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/08/17/20150817/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/08/17/20150817/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-08-11T02:11:00.000Z"><a href="/2015/08/11/20150811/">週二, 8月 11 2015, 10:11:00 上午</a></time>

  
    <h1 class="title"><a href="/2015/08/11/20150811/">解决IE8、IE7下radio和checkbox元素不触发onchange事件Bug</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/HTML/">HTML</a>, <a href="/tags/IE/">IE</a>, <a href="/tags/浏览器兼容/">浏览器兼容</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>由于IE8、IE7的bug，radio和checkbox元素的onchange事件是不能触发的，比如这段代码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"Q12"</span> value=<span class="string">"radio"</span> id=<span class="string">"Q12_0"</span>  onchange=<span class="string">"nextPnl('Q12');"</span>&gt;</span><br><span class="line">&lt;br/&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"Q12"</span> value=<span class="string">"radio"</span> id=<span class="string">"Q12_1"</span>  onchange=<span class="string">"nextPnl('Q12');"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>是不能执行到nextPnl方法的。</p>
<p>解决办法就是把change事件换成click事件，上述代码改成这样：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"Q12"</span> value=<span class="string">"radio"</span> id=<span class="string">"Q12_0"</span>  onclick=<span class="string">"nextPnl('Q12');"</span>&gt;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"radio"</span> name=<span class="string">"Q12"</span> value=<span class="string">"radio"</span> id=<span class="string">"Q12_1"</span>   onclick=<span class="string">"nextPnl('Q12');"</span>&gt;</span><br></pre></td></tr></table></figure>
<p>你也可以用这段代码来测试IE的这个BUG，以下代码在IE8、IE7下不会弹出对话框，在现代浏览器则可以弹框：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//测试change事件触发</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">clickCheckbox</span></span>()</span><br><span class="line">  &#123;</span><br><span class="line">  document.getElementById(<span class="string">'check1'</span>).click()</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">changeCheckbox</span></span>()</span><br><span class="line">&#123;</span><br><span class="line"> alert(<span class="string">"changeCheckbox"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;form&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"checkbox"</span> id=<span class="string">"check1"</span> onchange=<span class="string">"changeCheckbox()"</span>/&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;input <span class="built_in">type</span>=<span class="string">"button"</span> onclick=<span class="string">"clickCheckbox()"</span> value=<span class="string">"Click checkbox"</span> onchange=<span class="string">"changeCheckbox()"</span>/&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>在线测试工具：<a href="http://w3school.com.cn/tiy/t.asp?f=html_basic" target="_blank" rel="external">W3School在线测试工具</a></p>
<p>参考文档：<br><a href="http://stackoverflow.com/questions/11068196/ie8-ie7-onchange-event-is-triggered-only-after-repeated-selection" target="_blank" rel="external">1.html - IE8 &amp; IE7 onchange event is triggered only after repeated selection</a></p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/08/11/20150811/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/08/11/20150811/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/08/11/20150811/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-08-06T09:00:51.000Z"><a href="/2015/08/06/20150806/">週四, 8月 6 2015, 5:00:51 下午</a></time>

  
    <h1 class="title"><a href="/2015/08/06/20150806/">解决MyEclipse下Unhandled event loop exception org.eclipse.swt.SWTError No more handles</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/HTML/">HTML</a>, <a href="/tags/开发工具/">开发工具</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>MyEclipse下默认的JSP编辑器是MyEclipse Visual JSP Designer，我们更换掉默认的JSP编辑器即可解决问题。</p>
<p>Window-&gt;Preferences-&gt;General-&gt;Editors-&gt;File Associations</p>
<p>在File types里选择*.jsp</p>
<p>在下面的Associated editors里选择MyEclipse JSP Editor，点击右边的Default设置成默认编辑器即可。</p>
<p><img src="/images/更改默认jsp编辑器.png" alt="更改默认jsp编辑器"></p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/08/06/20150806/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/08/06/20150806/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/08/06/20150806/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>


  <article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header>
      
      <time datetime="2015-07-28T09:40:35.000Z"><a href="/2015/07/28/20150729/">週二, 7月 28 2015, 5:40:35 下午</a></time>

  
    <h1 class="title"><a href="/2015/07/28/20150729/">在IE10+隐藏input清除按钮</a></h1>
  


  
  <div class="categories">
  	<i class="fa fa-folder-open"></i>
    <a href="/categories/前端开发/">前端开发</a>
  </div>


  
  <div class="tags">
  	<i class="fa fa-tag"></i>
    <a href="/tags/HTML/">HTML</a>, <a href="/tags/IE/">IE</a>, <a href="/tags/浏览器兼容/">浏览器兼容</a>
  </div>

<div class="clear"></div>
      
    </header>
    <div class="entry">
      
        <p>IE10以后的版本在input聚焦且非空时会在input框内部右侧出现一个清除按钮X。<br><img src="/images/IE下的清除按钮.gif" alt="IE下的清除按钮"><br>这个清除按钮会带来很多问题，比如我们的页面中已经有了样式统一的清除按钮，这个按钮的出现就多此一举了。</p>
<p>同时，这个按钮也会打乱精心设计的布局，甚至会挡住右对齐的input里的文字。</p>
<p>微软官方的解释是，可以使用伪元素::-ms-clear来控制这个清除按钮。</p>
<p>我们在css中加入如下样式，即可隐藏掉这个按钮：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input::-ms-clear &#123;</span><br><span class="line">display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>密码输入框使用的是另一个伪类-ms-reveal，使用同样的方法隐藏掉清除按钮：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">input::-ms-reveal &#123;</span><br><span class="line">display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果想让input有一个符合预期的宽度，可以使用box-sizing属性来改变盒模型宽度和高度的计算方法，使元素在宽度和高度内绘制内边距和边框：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">box-sizing:border-box;</span><br><span class="line">-moz-box-sizing:border-box; /* Firefox */</span><br><span class="line">-webkit-box-sizing:border-box; /* Safari */</span><br></pre></td></tr></table></figure></p>
<p>参考文档：<br><a href="https://msdn.microsoft.com/en-us/library/windows/apps/hh465740.aspx" target="_blank" rel="external">1.-ms-clear pseudo-element - Windows app development</a><br><a href="https://connect.microsoft.com/IE/feedback/details/776537" target="_blank" rel="external">2.Text in right aligned input gets cuts off when using -ms-clear _ Microsoft Connect</a><br><a href="http://jwcooney.com/2013/11/04/fixing-ie-10-text-box-x-and-sizing-issues/" target="_blank" rel="external">3.Fixing IE 10 Text Box ‘X’ and Sizing Issues _ Justin Cooney</a></p>

      
    </div>
    <footer>
      
        <div class="alignleft">
            <a href="/2015/07/28/20150729/#more" class="more-link"><i class="fa fa-chevron-right"></i>Read More</a>
        </div>
        
        
          <div class="alignright"> 
            <a href="http://ym2067.com/2015/07/28/20150729/#comment" class="comment-link">
              <i class="fa fa-comments"></i><span class="ds-thread-count" data-thread-key="/2015/07/28/20150729/">&nbsp;
              </span>
            </a>
          </div>
        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'ym2067com';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>



<nav id="pagination">
  
  
  <div class="clearfix"></div>
</nav>

<script src="/js/jquery.anystretch.min.js" type="text/javascript"></script>
<script src="/js/cover.js" type="text/javascript"></script>

    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div>
  
  &copy; 2016 Ym2067
  
</div>
Powered by <a href="http://zespia.tw/hexo/" title="Hexo" target="_blank" rel="external">Hexo</a> and <a href="http://pages.github.com/" title="GitHub Pages" target="_blank" rel="external">GitHub Pages</a>

<div class="clearfix"></div></footer>
  
<script src="/js/jquery.imagesloaded.min.js" type="text/javascript"></script>
<script src="/js/gallery.js" type="text/javascript"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.0/js/bootstrap.min.js" type="text/javascript"></script>


<script type="text/javascript">
var disqus_shortname = 'ym2067com';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>



    <script type="text/javascript">
        (function(){

            $(window).scroll(function(){

                var scrollTop = $(window).scrollTop();
                if ( scrollTop >200 ){
                    $("#main-nav").removeClass('normal_mode').addClass('top_mode');
                } else{
                    $("#main-nav").removeClass('top_mode').addClass('normal_mode');
                }

            });

        })();
    </script>



  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript">
  (function($){
    $('.fancybox').fancybox({
      'titlePosition': 'inside'
    });
  })(jQuery);
  </script>



    
    <script type="text/javascript">
      var duoshuoQuery = {short_name:"your_id"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.src = 'http://static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0] 
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>



<script type="text/javascript">
  
  $(function(){

    $('.title').hover(
      function() {      
        $(this).stop().animate(
          {'marginLeft': '10px'}, 200
        );   
      }, 
      function() {       
        $(this).stop().animate({'marginLeft': '0px'}, 200);      
      
    });   

  });

</script>


</body>
</html>